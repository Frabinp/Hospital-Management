{% extends "base.html" %}

{% block title %}Patient History - FAM Hospital{% endblock %}

{% block content %}
<div class="patient-history">
    <div class="page-header">
        <h2>Medical History</h2>
        <a href="{{ url_for('add_medical_record') }}" class="btn btn-primary">Add New Record</a>
    </div>
    
    <div class="patient-info">
        <h3>Patient Information</h3>
        <div class="info-grid">
            <div class="info-item">
                <strong>Name:</strong> {{ patient[1] }}
            </div>
            <div class="info-item">
                <strong>Age:</strong> {{ patient[2] }}
            </div>
            <div class="info-item">
                <strong>Gender:</strong> {{ patient[3] }}
            </div>
            <div class="info-item">
                <strong>Phone:</strong> {{ patient[5] }}
            </div>
        </div>
    </div>
    
    <div class="records-section">
        <h3>Medical Records</h3>
        {% if records %}
            <div class="records-list">
                {% for record in records %}
                <div class="record-card">
                    <div class="record-header">
                        <h4>Visit on {{ record[6] }}</h4>
                        <div class="record-actions">
                            <a href="{{ url_for('view_medical_record', id=record[0]) }}" class="btn btn-sm btn-primary">View</a>
                            <a href="{{ url_for('edit_medical_record', id=record[0]) }}" class="btn btn-sm btn-secondary">Edit</a>
                        </div>
                    </div>
                    <div class="record-content">
                        <p><strong>Doctor:</strong> {{ record[2] }}</p>
                        {% if record[3] %}
                            <p><strong>Diagnosis:</strong> {{ record[3] }}</p>
                        {% endif %}
                        {% if record[4] %}
                            <p><strong>Treatment:</strong> {{ record[4] }}</p>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-data">
                <p>No medical records found for this patient.</p>
            </div>
        {% endif %}
    </div>
    
    <div class="back-link">
        <a href="{{ url_for('view_patients') }}" class="btn btn-primary">Back to Patients</a>
    </div>
</div>
{% endblock %}
